(async ()=>{
  const bases = [
    "http://localhost:8000",
    "http://localhost:8000/chemhub/api",
    "http://127.0.0.1:8000",
    "http://127.0.0.1:8000/chemhub/api"
  ];
  const endpoints = ["/api/health","/health","/openapi.json","/api/reactions","/api/products","/api/reaction?type=Amidation","/login"];
  for (const b of bases){
    for (const e of endpoints){
      const url = b.replace(/\/$/,"") + e;
      try {
        const res = await fetch(url, { method: "GET", mode: "cors" });
        let text = "(non-text body)";
        try { text = await res.text(); } catch(err) { text = "(error reading body)"; }
        console.log("✔", url, "=>", res.status, res.statusText, "| body:", text.slice(0,200));
      } catch (err) {
        console.log("✖", url, "=> ERROR:", err && err.message ? err.message : err);
      }
    }
  }

  // Test login with Basic header (doesn't send real creds; just checks CORS/preflight + route)
  try {
    const testLoginUrl = bases[0].replace(/\/$/,"") + "/login";
    console.log("\nTesting POST (Basic auth) to", testLoginUrl);
    const r = await fetch(testLoginUrl, {
      method: "POST",
      mode: "cors",
      headers: { Authorization: "Basic " + btoa("dummy:dummy") }
    });
    try { const txt = await r.text(); console.log("LOGIN POST", r.status, txt.slice(0,400)); }
    catch(e){ console.log("LOGIN POST", r.status, "(couldn't read body)"); }
  } catch(e) {
    console.log("LOGIN POST ERROR:", e.message);
  }
})();
