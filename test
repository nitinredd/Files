import streamlit as st
import openai

# Initialize OpenAI API (Replace with your own API keys and details)
openai.api_key = "your-api-key-here"
openai.api_type = "azure"
openai.api_base = "your-api-base-url-here"
openai.api_version = "2023-05-15"

# Translation function
def translate_text(text, source_lang):
    try:
        response = openai.ChatCompletion.create(
            engine="your-deployment-name",
            messages=[
                {"role": "system", "content": f"You are a professional translator from {source_lang} to English."},
                {"role": "user", "content": f"Translate the following {source_lang} text to English:\n\n{text}"}
            ],
            temperature=0.3,
            max_tokens=1024
        )
        translated_text = response.choices[0].message['content'].strip()
        return translated_text
    except Exception as e:
        # Catch and display API errors
        return f"Error: {e}"

# Streamlit app layout
st.title("Simple Text Translation App")

# Input for text and language selection
text_to_translate = st.text_area("Enter text to translate", height=100)
source_lang = st.selectbox("Select source language", ["Chinese", "Japanese"])

if st.button("Translate"):
    if text_to_translate:
        # Call the translation function
        translation = translate_text(text_to_translate, source_lang)
        st.subheader("Translated Text")
        st.write(translation)
    else:
        st.error("Please enter text to translate.")
