import React, { createContext, useState, useContext, useEffect } from 'react';

const AppContext = createContext();

export function useAppContext() {
  return useContext(AppContext);
}

export function AppProvider({ children }) {
  const [messages, setMessages] = useState([]);
  const [products, setProducts] = useState([]);
  const [currentProduct, setCurrentProduct] = useState(null);
  const [reactionType, setReactionType] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [sidebarOpen, setSidebarOpen] = useState(true);

  const addMessage = (message) => {
    setMessages(prev => [...prev, message]);
  };

  const clearChat = () => {
    setMessages([]);
    setCurrentProduct(null);
    setReactionType('');
  };

  const value = {
    messages,
    addMessage,
    clearChat,
    products,
    setProducts,
    currentProduct,
    setCurrentProduct,
    reactionType,
    setReactionType,
    isLoading,
    setIsLoading,
    sidebarOpen,
    setSidebarOpen
  };

  return <AppContext.Provider value={value}>{children}</AppContext.Provider>;
}
